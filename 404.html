<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>Error_404 - 三GAY志</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    @import url('https://fonts.googleapis.com/css?family=Bangers');
    * { position: relative; box-sizing: border-box; margin: 0; padding: 0; }
    body { width: 100%; overflow-x: hidden; background-color: #111827; color: white; }
    
    .container { min-height: 100vh; padding-top: 100px; }

    /* 方塊樣式：建議將您的磚塊圖上傳至 GitHub 或穩定空間並替換 URL */
    .block {
      position: absolute;
      left: 50%;
      top: 220px;
      transform: translateX(-50%);
      height: 80px;
      width: 80px;
      background-image: url('https://raw.githubusercontent.com/091cc/three-gay-kingdom/main/JPEG影像.jpeg'); /* 建議替換為您的穩定連結 */
      background-size: cover;
      background-color: #8b4513; /* 圖片失效時的備用色 */
      z-index: 10;
    }

    .mario {
      position: absolute;
      width: 78px;
      height: 68px;
      background-image: url('https://i.imgur.com/yG0LizU.png');
      background-position-y: -191px;
      background-position-x: -22px;
      transition: bottom .3s linear;
      z-index: 5;
    }

    .number {
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      text-align: center;
      font-size: 70px;
      text-shadow: -3px -3px 0 #000, 3px -3px 0 #000, -3px 3px 0 #000, 3px 3px 0 #000;
      font-family: 'Bangers', cursive;
      animation: moveUp 1.5s linear forwards;
    }

    @keyframes moveUp {
      from { transform: translate(-50%, 0); opacity: 1; }
      to { transform: translate(-50%, -180px); opacity: 0; }
    }

    .hit { animation: blockHit .2s linear; }
    @keyframes blockHit {
      0%, 100% { transform: translate(-50%, 0); }
      50% { transform: translate(-50%, -20px); }
    }

    .error-text { text-shadow: 0 0 20px rgba(250, 204, 21, 0.4); }
  </style>
</head>
<body>

  <header class="bg-gray-900/95 backdrop-blur-sm shadow-md fixed top-0 w-full z-50 border-b border-gray-800">
    <div class="max-w-screen-xl mx-auto flex flex-col md:flex-row items-center justify-between px-6 py-4">
      <a href="index.html" class="flex items-center space-x-3 mb-4 md:mb-0 hover:opacity-80 transition">
        <img src="三GAY志.png" alt="Logo" class="w-10 h-10 rounded" />
        <span class="text-xl md:text-2xl font-bold tracking-tighter">三GAY志</span>
      </a>

      <nav class="flex flex-wrap items-center justify-center md:justify-end gap-6 text-sm font-medium">
        <a href="yang_quotes.html" class="hover:text-yellow-400 transition">楊語錄</a>
        <a href="shopping.html" class="hover:text-yellow-400 transition">周邊購物</a>
        <a href="https://elcan1989.github.io/Yang-Life/index.html" class="hover:scale-105 transition flex items-center">
          <img src="https://elcan1989.github.io/Yang-Life/images/photo.png" alt="機智楊老生活" class="w-20 h-10 rounded border border-gray-700 object-cover">
        </a>
        <a href="#contact" class="hover:text-yellow-400 transition">聯絡資訊</a>
      </nav>
    </div>
  </header>

  <div class="container" id="container">
    <div class="block" id="block"></div>
    <div class="mario" id="mario"></div>
  </div>

  <div class="flex flex-col items-center justify-center w-full -mt-24 pb-20">
    <h1 class="text-6xl md:text-8xl font-black error-text mb-4 italic text-white">ERROR_<span class="text-yellow-400">404</span></h1>
    <a href="index.html" class="group flex items-center space-x-2 text-2xl text-gray-400 hover:text-white transition">
      <span>回首頁探險</span>
      <span class="group-hover:translate-x-2 transition">→</span>
    </a>
  </div>

  <script>
    const blocksData = [4, 0, 4];
    const colors = ['#f87171', '#4ade80', '#60a5fa', '#facc15'];
    const mario = document.querySelector("#mario");
    const block = document.querySelector("#block");
    const container = document.querySelector("#container");
    const marioSpeed = 5;

    let blockOn = 0;
    let moveMarioInterval = null;
    let stepsTaken = 0;
    const marioPositions = [-22, -219, -414];
    let bgPositionOn = 0;

    document.addEventListener("DOMContentLoaded", resetMario);

    function resetMario() {
      mario.style.bottom = '150px';
      mario.style.left = '-100px';
      blockOn = 0;
      clearInterval(moveMarioInterval);
      startMoving();
    }

    function startMoving() {
      moveMarioInterval = setInterval(() => {
        let currentPos = parseInt(mario.style.left, 10);
        mario.style.left = (currentPos + marioSpeed) + 'px';

        if (stepsTaken >= 5) {
          mario.style.backgroundPositionX = marioPositions[bgPositionOn] + 'px';
          bgPositionOn = 1 - bgPositionOn;
          stepsTaken = 0;
        } else { stepsTaken++; }

        if (checkMarioUnderBlock()) { triggerJumpSequence(); }
        if (currentPos > window.innerWidth + 100) resetMario();
      }, 10);
    }

    function checkMarioUnderBlock() {
      const b = block.getBoundingClientRect();
      const m = mario.getBoundingClientRect();
      return Math.abs((m.left + m.width/2) - (b.left + b.width/2)) < 15;
    }

    function triggerJumpSequence() {
      clearInterval(moveMarioInterval);
      mario.style.backgroundPositionX = marioPositions[1] + 'px';

      let jumpCount = 0;
      const jumpInterval = setInterval(() => {
        if (jumpCount >= blocksData.length) {
          clearInterval(jumpInterval);
          startMoving(); // 落地後繼續走
        } else {
          executeJump();
          jumpCount++;
        }
      }, 1200);
    }

    function executeJump() {
      mario.style.bottom = '490px';
      mario.style.backgroundPositionX = marioPositions[2] + 'px';

      setTimeout(() => {
        block.classList.add('hit');
        createNumber(blocksData[blockOn++ % 3]);
        setTimeout(() => block.classList.remove('hit'), 200);
      }, 300);

      setTimeout(() => {
        mario.style.bottom = '150px';
        mario.style.backgroundPositionX = marioPositions[bgPositionOn] + 'px';
      }, 450);
    }

    function createNumber(val) {
      const n = document.createElement('div');
      n.innerHTML = val;
      n.style.top = '220px';
      n.style.color = colors[Math.floor(Math.random() * colors.length)];
      n.classList.add('number');
      container.appendChild(n);
      setTimeout(() => n.remove(), 1500);
    }
  </script>
</body>
</html>
