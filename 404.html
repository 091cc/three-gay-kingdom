<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>Error_404 - 三GAY志</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    @import url('https://fonts.googleapis.com/css?family=Bangers');
    * { position: relative; box-sizing: border-box; margin: 0; padding: 0; }
    body { width: 100%; overflow-x: hidden; background-color: #111827; color: white; }
    
    .container { min-height: 100vh; padding-top: 100px; }

    /* 共用方塊樣式 */
    .base-block {
      position: absolute;
      top: 220px;
      height: 80px;
      width: 80px;
      background-size: cover;
      z-index: 10;
    }

    /* 方塊 1：問號塊 */
    #block1 {
      left: 40%;
      transform: translateX(-50%);
      background-image: url('https://pa1.narvii.com/6489/524d20cabd4731dffd6453fb707ab1d2b2b11c52_00.gif');
    }

    /* 方塊 2：一般磚塊 */
    #block2 {
      left: 60%;
      transform: translateX(-50%);
      background-image: url('https://i.imgur.com/vHq0sNo.png'); /* 這裡換成磚塊圖片路徑 */
      background-color: #8b4513; /* 備用色 */
      border: 4px solid #000;
    }

    .mario {
      position: absolute;
      width: 78px;
      height: 68px;
      background-image: url('https://i.imgur.com/yG0LizU.png');
      background-position-y: -191px;
      background-position-x: -22px;
      transition: bottom .3s linear;
      z-index: 5;
    }

    .number {
      position: absolute;
      text-align: center;
      font-size: 70px;
      text-shadow: -3px -3px 0 #000, 3px -3px 0 #000, -3px 3px 0 #000, 3px 3px 0 #000;
      font-family: 'Bangers', cursive;
      animation: moveUp 1.5s linear forwards;
    }

    @keyframes moveUp {
      from { transform: translateY(0); opacity: 1; }
      to { transform: translateY(-180px); opacity: 0; }
    }

    .hit { animation: blockHit .2s linear; }
    @keyframes blockHit {
      0%, 100% { margin-top: 0; }
      50% { margin-top: -20px; }
    }

    .error-text { text-shadow: 0 0 20px rgba(250, 204, 21, 0.4); }
  </style>
</head>
<body>

  <header class="bg-gray-900/95 backdrop-blur-sm shadow-md fixed top-0 w-full z-50 border-b border-gray-800">
    <div class="max-w-screen-xl mx-auto flex flex-col md:flex-row items-center justify-between px-6 py-4">
      <a href="index.html" class="flex items-center space-x-3 mb-4 md:mb-0 hover:opacity-80 transition">
        <img src="三GAY志.png" alt="Logo" class="w-10 h-10 rounded" />
        <span class="text-xl md:text-2xl font-bold tracking-tighter">三GAY志</span>
      </a>
      <nav class="flex items-center gap-6 text-sm font-medium">
        <a href="yang_quotes.html" class="hover:text-yellow-400 transition">楊語錄</a>
        <a href="shopping.html" class="hover:text-yellow-400 transition">周邊購物</a>
        <a href="#contact" class="hover:text-yellow-400 transition">聯絡資訊</a>
      </nav>
    </div>
  </header>

  <div class="container" id="container">
    <div class="base-block" id="block1"></div>
    <div class="base-block" id="block2"></div>
    <div class="mario" id="mario"></div>
  </div>

  <div class="flex flex-col items-center justify-center w-full -mt-24 pb-20">
    <h1 class="text-6xl md:text-8xl font-black error-text mb-4 italic text-white">ERROR_<span class="text-yellow-400">404</span></h1>
    <a href="index.html" class="group flex items-center space-x-2 text-2xl text-gray-400 hover:text-white transition">
      <span>回首頁探險</span>
      <span class="group-hover:translate-x-2 transition">→</span>
    </a>
  </div>

  <script>
    const blocksData = [4, 0, 4];
    const colors = ['#f87171', '#4ade80', '#60a5fa', '#facc15'];
    const mario = document.querySelector("#mario");
    const container = document.querySelector("#container");
    const marioSpeed = 5;

    let moveMarioInterval = null;
    let stepsTaken = 0;
    const marioPositions = [-22, -219, -414];
    let bgPositionOn = 0;
    
    // 追蹤目前撞到第幾個數字與第幾個方塊
    let currentNumberIdx = 0;
    let hitBlocks = { block1: false, block2: false };

    document.addEventListener("DOMContentLoaded", resetMario);

    function resetMario() {
      mario.style.bottom = '150px';
      mario.style.left = '-100px';
      currentNumberIdx = 0;
      hitBlocks = { block1: false, block2: false };
      clearInterval(moveMarioInterval);
      startMoving();
    }

    function startMoving() {
      moveMarioInterval = setInterval(() => {
        let currentPos = parseInt(mario.style.left, 10);
        mario.style.left = (currentPos + marioSpeed) + 'px';

        // 跑步動畫
        if (stepsTaken >= 5) {
          mario.style.backgroundPositionX = marioPositions[bgPositionOn] + 'px';
          bgPositionOn = 1 - bgPositionOn;
          stepsTaken = 0;
        } else { stepsTaken++; }

        // 偵測撞擊
        checkHit('block1');
        checkHit('block2');

        if (currentPos > window.innerWidth + 100) resetMario();
      }, 10);
    }

    function checkHit(id) {
      if (hitBlocks[id]) return;
      
      const b = document.getElementById(id).getBoundingClientRect();
      const m = mario.getBoundingClientRect();
      
      if (Math.abs((m.left + m.width/2) - (b.left + b.width/2)) < 20) {
        hitBlocks[id] = true;
        executeJump(id);
      }
    }

    function executeJump(targetId) {
      clearInterval(moveMarioInterval);
      const targetBlock = document.getElementById(targetId);

      // 跳起
      mario.style.bottom = '490px';
      mario.style.backgroundPositionX = marioPositions[2] + 'px';

      setTimeout(() => {
        targetBlock.classList.add('hit');
        // 如果還有數字就生出來
        if (currentNumberIdx < blocksData.length) {
          createNumber(blocksData[currentNumberIdx++], targetBlock.offsetLeft);
        }
        setTimeout(() => targetBlock.classList.remove('hit'), 200);
      }, 300);

      setTimeout(() => {
        mario.style.bottom = '150px';
        mario.style.backgroundPositionX = marioPositions[bgPositionOn] + 'px';
        // 落地後繼續走
        startMoving();
      }, 450);
    }

    function createNumber(val, xPos) {
      const n = document.createElement('div');
      n.innerHTML = val;
      n.style.left = xPos + 'px';
      n.style.top = '220px';
      n.style.color = colors[Math.floor(Math.random() * colors.length)];
      n.classList.add('number');
      container.appendChild(n);
      setTimeout(() => n.remove(), 1500);
    }
  </script>
</body>
</html>
